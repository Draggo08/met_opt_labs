# Отчет по лабораторной работе
## Решение задач линейного программирования

**Автор:** Гельм Даниил

---

## 1. Постановка задачи (общая)

Задача линейного программирования (ЗЛП) в общей форме формулируется следующим образом:

Найти вектор **x** = (x₁, x₂, ..., xₙ), который:

- **Максимизирует** (или **минимизирует**) целевую функцию:
  ```
  f(x) = c₁x₁ + c₂x₂ + ... + cₙxₙ
  ```

- При ограничениях:
  ```
  aᵢ₁x₁ + aᵢ₂x₂ + ... + aᵢₙxₙ ≤ bᵢ  (i = 1, ..., m₁)
  aᵢ₁x₁ + aᵢ₂x₂ + ... + aᵢₙxₙ ≥ bᵢ  (i = m₁+1, ..., m₂)
  aᵢ₁x₁ + aᵢ₂x₂ + ... + aᵢₙxₙ = bᵢ  (i = m₂+1, ..., m)
  xⱼ ≥ 0  (j = 1, ..., n)
  ```

где:
- **cⱼ** - коэффициенты целевой функции
- **aᵢⱼ** - коэффициенты ограничений
- **bᵢ** - правая часть ограничений
- **xⱼ** - переменные задачи

**Цель работы:** Разработать программу, которая решает ЗЛП в общей форме, преобразует её в канонический вид, находит опорное решение (в том числе через вспомогательную задачу) и решает основную задачу симплекс-методом.

---

## 2. Общий алгоритм решения (блок-схема)

```
НАЧАЛО
  │
  ├─> Чтение ЗЛП из файла
  │
  ├─> Преобразование в канонический вид:
  │     ├─> Для ограничений ≤: добавить слабую переменную
  │     ├─> Для ограничений ≥: добавить избыточную и искусственную переменные
  │     ├─> Для ограничений =: добавить искусственную переменную
  │     └─> Минимизацию преобразовать в максимизацию
  │
  ├─> Есть искусственные переменные?
  │     │
  │     ├─> ДА → Двухфазный симплекс-метод:
  │     │         │
  │     │         ├─> ФАЗА 1: Минимизация суммы искусственных переменных
  │     │         │     ├─> Решить вспомогательную задачу симплекс-методом
  │     │         │     ├─> Если оптимальное значение > 0 → ЗАДАЧА НЕРАЗРЕШИМА
  │     │         │     └─> Иначе: удалить искусственные переменные из базиса
  │     │         │
  │     │         └─> ФАЗА 2: Решение исходной задачи
  │     │               └─> Симплекс-метод с найденным опорным решением
  │     │
  │     └─> НЕТ → Симплекс-метод напрямую
  │
  ├─> Симплекс-метод:
  │     │
  │     ├─> Вычислить базисное решение: x_B = B⁻¹b
  │     │
  │     ├─> Вычислить reduced costs: Δⱼ = cⱼ - π·Aⱼ, где π = c_B·B⁻¹
  │     │
  │     ├─> Проверка оптимальности:
  │     │     ├─> Все reduced costs ≤ 0? → РЕШЕНИЕ ОПТИМАЛЬНО
  │     │     └─> Иначе: выбрать входящую переменную (max reduced cost)
  │     │
  │     ├─> Найти выходящую переменную (минимальное отношение)
  │     │
  │     ├─> Обновить базис
  │     │
  │     └─> Повторить до оптимальности или неограниченности
  │
  ├─> Вывод результата:
  │     ├─> Оптимальное решение найдено → вывести x* и f(x*)
  │     ├─> Задача неограничена → вывести сообщение
  │     └─> Задача неразрешима → вывести сообщение
  │
КОНЕЦ
```

---

## 3. Ссылка на программу (репозиторий)

Программа находится в директории `lab3/` и состоит из следующих файлов:

- **`simplex.py`** - основной модуль с реализацией симплекс-метода
- **`parser.py`** - парсер для чтения ЗЛП из текстового файла
- **`main.py`** - главный файл программы
- **`example1.txt`, `example2.txt`, `example3.txt`** - примеры входных файлов

**Использование:**
```bash
python3 main.py example1.txt
```

---

## 4. Демонстрация примера решения ЗЛП

### Пример 1: Задача максимизации

**Исходная задача:**
```
max: 3 x1 + 2 x2
subject to:
2 x1 + x2 <= 10
x1 + 2 x2 <= 8
x1 >= 0
x2 >= 0
```

**Результат выполнения программы:**
```
=== Исходная задача ===
Целевая функция: max 3.00*x1 + 2.00*x2

Ограничения:
  2.00*x1 + 1.00*x2 <= 10.00
  1.00*x1 + 2.00*x2 <= 8.00

=== Решение ===
✓ Решение найдено!

Оптимальное значение целевой функции: 16.000000

Оптимальный вектор x:
  x1 = 4.000000
  x2 = 2.000000
```

**Проверка:**
- Ограничение 1: 2·4 + 1·2 = 10 ≤ 10 ✓
- Ограничение 2: 1·4 + 2·2 = 8 ≤ 8 ✓
- Целевая функция: 3·4 + 2·2 = 16 ✓

### Пример 2: Задача минимизации с ограничениями ≥

**Исходная задача:**
```
min: x1 + 2 x2
subject to:
x1 + x2 >= 1
x1 >= 0
x2 >= 0
```

**Результат выполнения программы:**
```
=== Исходная задача ===
Целевая функция: min 1.00*x1 + 2.00*x2

Ограничения:
  1.00*x1 + 1.00*x2 >= 1.00

=== Решение ===
✓ Решение найдено!

Оптимальное значение целевой функции: 1.000000

Оптимальный вектор x:
  x1 = 1.000000
  x2 = 0.000000
```

**Проверка:**
- Ограничение: 1·1 + 1·0 = 1 ≥ 1 ✓
- Целевая функция: 1·1 + 2·0 = 1 ✓

---

## 5. Заключение

### Что интересного было в данной работе:

1. **Двухфазный симплекс-метод** - интересная техника для нахождения начального опорного решения, когда оно не очевидно. Особенно важно правильно обработать переход между фазами и удаление искусственных переменных из базиса.

2. **Преобразование в канонический вид** - необходимость добавления различных типов дополнительных переменных (слабых, избыточных, искусственных) в зависимости от типа ограничений.

3. **Численная устойчивость** - важность правильной обработки вырожденных случаев и численных ошибок при работе с матрицами.

### Что полезного:

1. **Понимание симплекс-метода** - глубокое понимание алгоритма решения ЗЛП, включая вычисление базисных решений, reduced costs и критериев оптимальности.

2. **Работа с матрицами** - практический опыт работы с матричными операциями (обращение матриц, решение систем линейных уравнений).

3. **Обработка различных случаев** - необходимость учитывать различные сценарии: задача может быть оптимальной, неограниченной или неразрешимой.

### Что бестолкового:

1. **Сложность парсинга** - парсинг входного файла с математическими выражениями оказался более сложным, чем ожидалось, особенно обработка знаков и коэффициентов.

2. **Отладка двухфазного метода** - переход между фазами и формирование базиса для второй фазы потребовали значительных усилий для правильной реализации.

3. **Обработка вырожденных случаев** - случаи, когда базисная матрица вырождена или базисное решение недопустимо, требуют дополнительной логики, которая усложняет код.

**Общий вывод:** Работа позволила глубоко понять алгоритм симплекс-метода и его реализацию. Несмотря на сложности с численной устойчивостью и обработкой граничных случаев, программа успешно решает задачи линейного программирования в общей форме.

