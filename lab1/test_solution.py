#!/usr/bin/env python3
"""Тестовый скрипт для проверки решения задачи"""

import numpy as np

# Задача: max Z = 2x1 + 3x2 + x3 + 4x4
# x1 + x2 + x3 + x4 <= 10
# 2x1 + x2 - x3 + x4 = 8
# x2 + 2x3 + x4 >= 5
# x1, x2, x3, x4 >= 0

# Проверяем решение x = (0, 0, 0, 8)
x = np.array([0, 0, 0, 8])

# Целевая функция
Z = 2*x[0] + 3*x[1] + 1*x[2] + 4*x[3]
print(f"Целевая функция: Z = {Z}")

# Ограничения
print("\nПроверка ограничений:")
print(f"1. x1 + x2 + x3 + x4 <= 10: {x[0] + x[1] + x[2] + x[3]} <= 10 ✓" if x[0] + x[1] + x[2] + x[3] <= 10 else f"1. x1 + x2 + x3 + x4 <= 10: {x[0] + x[1] + x[2] + x[3]} <= 10 ✗")
print(f"2. 2x1 + x2 - x3 + x4 = 8: {2*x[0] + x[1] - x[2] + x[3]} = 8 ✓" if abs(2*x[0] + x[1] - x[2] + x[3] - 8) < 1e-6 else f"2. 2x1 + x2 - x3 + x4 = 8: {2*x[0] + x[1] - x[2] + x[3]} = 8 ✗")
print(f"3. x2 + 2x3 + x4 >= 5: {x[1] + 2*x[2] + x[3]} >= 5 ✓" if x[1] + 2*x[2] + x[3] >= 5 else f"3. x2 + 2x3 + x4 >= 5: {x[1] + 2*x[2] + x[3]} >= 5 ✗")
print(f"4. x1, x2, x3, x4 >= 0: все неотрицательны ✓" if all(x >= 0) else "4. x1, x2, x3, x4 >= 0: не все неотрицательны ✗")

# Попробуем другие решения
print("\n" + "="*60)
print("Попытка улучшить решение:")
print("="*60)

# Из второго ограничения: x4 = 8 - 2x1 - x2 + x3
# Подставляем в первое: x1 + x2 + x3 + (8 - 2x1 - x2 + x3) <= 10
# -x1 + 2x3 <= 2
# x1 >= 2x3 - 2

# Попробуем x3 = 1, тогда x1 >= 0, возьмем x1 = 0, x2 = 0
# x4 = 8 - 0 - 0 + 1 = 9
x_test = np.array([0, 0, 1, 9])
Z_test = 2*x_test[0] + 3*x_test[1] + 1*x_test[2] + 4*x_test[3]
print(f"\nТест 1: x = {x_test}, Z = {Z_test}")
print(f"Ограничение 1: {x_test[0] + x_test[1] + x_test[2] + x_test[3]} <= 10: {'✓' if x_test[0] + x_test[1] + x_test[2] + x_test[3] <= 10 else '✗'}")
print(f"Ограничение 2: {2*x_test[0] + x_test[1] - x_test[2] + x_test[3]} = 8: {'✓' if abs(2*x_test[0] + x_test[1] - x_test[2] + x_test[3] - 8) < 1e-6 else '✗'}")

# Попробуем x2 > 0
# Из второго: x4 = 8 - 2x1 - x2 + x3
# Если x1 = 0, x2 = 1, x3 = 0, то x4 = 7
x_test2 = np.array([0, 1, 0, 7])
Z_test2 = 2*x_test2[0] + 3*x_test2[1] + 1*x_test2[2] + 4*x_test2[3]
print(f"\nТест 2: x = {x_test2}, Z = {Z_test2}")
print(f"Ограничение 1: {x_test2[0] + x_test2[1] + x_test2[2] + x_test2[3]} <= 10: {'✓' if x_test2[0] + x_test2[1] + x_test2[2] + x_test2[3] <= 10 else '✗'}")
print(f"Ограничение 2: {2*x_test2[0] + x_test2[1] - x_test2[2] + x_test2[3]} = 8: {'✓' if abs(2*x_test2[0] + x_test2[1] - x_test2[2] + x_test2[3] - 8) < 1e-6 else '✗'}")

print("\n" + "="*60)
print("ИТОГОВЫЙ РЕЗУЛЬТАТ:")
print("="*60)
print(f"Оптимальная точка: x* = ({x[0]}, {x[1]}, {x[2]}, {x[3]})")
print(f"Значение целевой функции: Z* = {Z}")

